![Demo-Overview-EC2-Terraform](/assets/Demo-Overview-EC2-Terraform.png)

- NACL - subnet level (open by default)
- Security group - server level (closed by default)

![igw-ec2-terraform](/assets/igw-ec2-terraform.png)

![plan-apply-igw](/assets/plan-apply-igw.png)

![route-tables-created](/assets/route-tables-created.png)

# Security Group
- We want to open the port to allow access so we will configure security group
- incoming traffic - ssh into EC2, access from the browser; so we configure ingress for incomming traffic   

- Get Ip Address from https://www.whatsmyip.org/

- outgoing traffic - installations, fetch docker image; suppose we have nginx so the image needs to be fetched from browser right, we use egress

![sg-created-ec2](/assets/sg-created-ec2.png)

# Automate SSH Key Pair
- Previously used is manually created key-pair 
- Use cmd `ssh-keygen`
- id_rsa.pub is needed
- get the value by `cat ~/.ssh/id_rsa.pub` # Do not check this in git repo

## If you need particular attribute of ec2 instance then run `terraform state show aws_instance.myapp-server` 
# since we have public and private key to ssh into server use `ssh -i ~/.ssh/id_rsa ec2-user@<public_ip>`

# IaC benefits 
- you may forget to clean up resources but terraform does it
- Environment replication for development, staging 
- in manual you need to document the stuff. Knowledge sharing difficult manually 